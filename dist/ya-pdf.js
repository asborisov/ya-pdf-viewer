function delegateService(e){return["$log",function(n){function t(e){this.handle=e}var a=this,o=this._instances=[];this._registerInstance=function(e,n){return e.$$delegateHandle=n,o.push(e),function(){var n=o.indexOf(e);-1!==n&&o.splice(n,1)}},this.$getByHandle=function(e){return e?new t(e):a},e.forEach(function(e){t.prototype[e]=function(){var t,a,r=this.handle,u=arguments,l=0;return o.forEach(function(n){n.$$delegateHandle===r&&(l++,a=n[e].apply(n,u),1===l&&(t=a))}),l?t:n.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},a[e]=function(){var n,t,a=arguments;return o.forEach(function(o,r){t=o[e].apply(o,a),0===r&&(n=t)}),n}})}]}!function(){"use strict";angular.module("ya.pdf",[]).service("yaPdfDelegate",delegateService(["goToPage","goPrevious","goNext","zoomIn","zoomOut","updateScale","getPageCount","getCurrentPage","getCurrentScale"]))}(),function(){"use strict";function e(e){var n=null;return{restrict:"E",template:'<div style="overflow: auto"><canvas></canvas></div>',scope:{delegateHandle:"@",pdfUrl:"@",startPage:"@",startScale:"=",onLoaded:"&",onError:"&",onProgress:"&",onPageRendered:"&"},controller:["$scope",function(t){function a(){t.pdfUrl&&(t.pageRendering=!1,t.pageNum=t.startPage?t.startPage:1,PDFJS.disableWorker=!0,PDFJS.getDocument(t.pdfUrl,null,null,o).then(function(e){"function"==typeof t.onLoaded&&t.onLoaded(),t.pdfDoc=e,u(t.pageNum),t.$apply(function(){t.pageCount=e.numPages})},function(e){e&&"function"==typeof t.onError&&t.onError({error:e})}))}function o(e){t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}function r(e){t.pageRendering=!0,t.pdfDoc.getPage(e).then(function(a){var o=n.getContext("2d"),u=a.getViewport(t.scale);n.height=u.height,n.width=u.width;var l={canvasContext:o,viewport:u};a.render(l).promise.then(function(){t.pageNum=e,t.pageRendering=!1,t.onPageRendered&&t.onPageRendered({page:t.pageNum}),t.pageNumPending&&(r(t.pageNumPending),t.pageNumPending=null)})})}function u(e){e=parseInt(e),t.pageRendering?t.pageNumPending=e:r(e)}function l(){t.pageNum<=1||u(parseInt(t.pageNum)-1)}function c(){t.pageNum>=pdfDoc.numPages||u(parseInt(t.pageNum)+1)}function i(){var e=parseFloat(t.scale)+.2;return 5.01>=e&&(t.scale=e,u(t.pageNum)),t.scale}function g(){var e=parseFloat(t.scale)-.2;return e>.01&&(t.scale=e,u(t.pageNum)),t.scale}function d(e){return t.scale=parseFloat(e),u(t.pageNum),t.scale}function s(){return t.pageCount||0}function f(){return t.pageNum}function p(){return t.scale}var m=e._registerInstance(t,t.delegateHandle);t.$on("$destroy",m),t.pdfDoc=null,t.scale=t.startScale>0?t.startScale:1,t.goToPage=u,t.goPrevious=l,t.goNext=c,t.zoomIn=i,t.zoomOut=g,t.updateScale=d,t.getPageCount=s,t.getCurrentPage=f,t.getCurrentScale=p,t.init=a}],link:function(e,t,a){function o(e,n){var a=t.find("div")[0];t.find(a).css(e,n)}a.$observe("pdfUrl",function(n){n&&e.init()}),n=t.find("canvas")[0],a.maxWidth&&a.$observe("maxWidth",function(e){o("width",e)}),e.$watch(function(){return t.css("max-width")},function(e,n){e!=n&&o("width",e)})}}}angular.module("ya.pdf").directive("yaPdfViewer",["yaPdfDelegate",e])}(),function(){"use strict";function e(e){e.put("yaPdfToolbarTemplate.html",'<div><div class="btn-group pdf-arrow"><i class="fa fa-arrow-left fa-lg advanced-input-icon" ng-click="prev()"></i><i class="fa fa-arrow-right fa-lg advanced-input-icon" ng-click="next()"></i><i class="fa fa-search-minus fa-lg advanced-input-icon" ng-click="zoomOut()"></i><i class="fa fa-search-plus fa-lg advanced-input-icon" ng-click="zoomIn()"></i></div><div class="btn-group"><input type="text" class="form-control pdf-current-page" min=1 ng-model="currentPage" ng-change="goToPage()"> / {{pageCount()}}</div></div>')}function n(e,n){return{restrict:"E",scope:{delegateHandle:"@"},templateUrl:function(e,n){return n.templateUrl||"yaPdfToolbarTemplate.html"},controller:["$scope",function(t){function a(){d()}function o(){t.currentPage>1&&(t.currentPage--,l(t.currentPage))}function r(){t.currentPage&&t.currentPage<t.pagesCountValue&&(t.currentPage++,l(t.currentPage))}function u(){l(t.currentPage)}function l(e){e&&parseInt(e)&&e<=t.pagesCountValue&&e>0&&n.$getByHandle(t.delegateHandle).goToPage(e)}function c(){return t.pagesCountValue=n.$getByHandle(t.delegateHandle).getPageCount(),t.pagesCountValue}function i(){t.scale=n.$getByHandle(t.delegateHandle).zoomIn()}function g(){t.scale=n.$getByHandle(t.delegateHandle).zoomOut()}function d(){t.timeout=e(function(){t.scale=n.$getByHandle(t.delegateHandle).getCurrentScale(),e.cancel(t.timeout)},500)}function s(){var e=parseFloat(t.scale);e>0&&5>=e&&(t.scale=n.$getByHandle(t.delegateHandle).updateScale(e))}t.currentPage=1,t.scale=1,t.pagesCountValue=0,t.prev=o,t.next=r,t.zoomIn=i,t.zoomOut=g,t.setScale=s,t.goToPage=u,t.pageCount=c,t.init=a}],link:function(e){e.delegateHandle&&e.init()}}}angular.module("ya.pdf").run(["$templateCache",e]).directive("yaPdfToolbar",["$timeout","wsPdfDelegate",n])}();